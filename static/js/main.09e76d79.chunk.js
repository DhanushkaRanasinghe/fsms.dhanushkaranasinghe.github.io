(this.webpackJsonpfoodwastemanagement=this.webpackJsonpfoodwastemanagement||[]).push([[0],{425:function(e,t,a){},430:function(e,t,a){},433:function(e,t,a){},451:function(e,t,a){},452:function(e,t,a){},453:function(e,t,a){},483:function(e,t,a){},484:function(e,t,a){},542:function(e,t,a){},543:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(25),c=a.n(r),o=(a(425),a(426),a(386)),i=a.n(o),l=a(103),d=a(80),u=a(387),j=a(12),b="LOAD_USER",p="LOGIN_USER",h="SIGNUP_USER",O="CREATE_POST",m="DELETE_POST",f="UPDATE_POST",x="LOGOUT_USER",g="LOAD_POSTS",v="ERROR",y="UP_VOTE",_="UPDATE_USER",w={user:null,loading:!0,error:null},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:case h:case p:return Object(j.a)(Object(j.a)({},e),{},{user:t.payload,loading:!1});case x:return Object(j.a)(Object(j.a)({},e),{},{user:null,loading:!1});case _:return e.user=t.payload,Object(j.a)({},e);case v:return Object(j.a)(Object(j.a)({},e),{},{error:t.payload});default:return e}},N=a(61),S={posts:[],loading:!0,error:null},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(j.a)(Object(j.a)({},e),{},{posts:t.payload,loading:!1,error:null});case O:return Object(j.a)(Object(j.a)({},e),{},{posts:[t.payload].concat(Object(N.a)(e.posts)),loading:!1,error:null});case f:return Object(j.a)(Object(j.a)({},e),{},{posts:[t.payload].concat(Object(N.a)(e.posts.filter((function(e){return e._id!==t.payload._id})))),loading:!1,error:null});case m:return Object(j.a)(Object(j.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.payload._id})),loading:!1,error:null});case v:return Object(j.a)(Object(j.a)({},e),{},{posts:null,loading:!1,error:t.payload});case y:var a=e.posts.filter((function(e){return e._id===t.payload.postId}))[0];return e.posts.splice(e.posts.indexOf(a,1)),a.points.includes(t.payload.currentUserId)?a.points=a.points.filter((function(e){return e!=t.payload.currentUserId})):a.points.push(t.payload.currentUserId),e.posts.push(a),Object(j.a)({},e);default:return e}},D=Object(d.c)({user:k,posts:C}),I=Object(d.e)(D,Object(d.d)(Object(d.a)(u.a))),P=a(15),U=a.p+"static/media/logo.39c101c5.png",F=(a(430),a(38)),L=a(86),R=a(340),A=a(566),T=a(572),E=a(570),q=a(571),B=a(569),z=a(2);var M=function(e){var t=Object(F.g)(),a=Object(n.useState)(!1),r=Object(P.a)(a,2),c=r[0],o=r[1],i=s.a.useState(!1),l=Object(P.a)(i,2),d=l[0],u=l[1],j=function(){u(!0),localStorage.getItem("token")||t.replace("/login")},b=function(){u(!1)};return Object(z.jsxs)("div",{className:"header_main",children:[Object(z.jsxs)("div",{className:"header_top",children:[Object(z.jsx)("img",{className:"logo",src:U,alt:"logo"}),Object(z.jsx)(L.b,{style:{textDecoration:"none"},to:"/",children:Object(z.jsx)("h2",{children:"Food Waste"})})]}),Object(z.jsxs)("div",{className:c?"header_middle_open":"header_middle",children:[Object(z.jsx)("a",{onClick:function(){o(!c),t.push("/")},children:Object(z.jsx)("p",{children:"Home"})}),Object(z.jsx)("a",{onClick:function(){o(!c),t.push("dashboard")},children:Object(z.jsx)("p",{children:"Dashboard"})}),localStorage.getItem("token")&&Object(z.jsx)("a",{onClick:function(){o(!c),t.push("account")},children:Object(z.jsx)("p",{children:"Account"})}),Object(z.jsx)("a",{onClick:function(){t.push("map")},children:Object(z.jsx)("p",{children:"Maps"})}),Object(z.jsx)(z.Fragment,{children:Object(z.jsx)("button",{onClick:j,className:c?"mob_sign_in_button":"des_sign_in_button",children:localStorage.getItem("token")?"Log out":"Connect with us"})})]}),Object(z.jsxs)("div",{className:"header_bottom",children:[Object(z.jsx)("button",{onClick:j,className:"sign_in_button",children:localStorage.getItem("token")?"Log out":" Connect with us"}),Object(z.jsx)("i",{onClick:function(){return o(!c)},className:c?"fa fa-bars open":"fa fa-bars"})]}),Object(z.jsxs)(A.a,{open:d,onClose:b,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(z.jsx)(B.a,{id:"alert-dialog-title",children:Object(z.jsx)("b",{children:"Food Waste Management"})}),Object(z.jsx)(E.a,{children:Object(z.jsx)(q.a,{id:"alert-dialog-description",children:"Are you sure to logout form this website??"})}),Object(z.jsxs)(T.a,{children:[Object(z.jsx)(R.a,{onClick:b,color:"primary",children:"cancel"}),Object(z.jsx)(R.a,{onClick:function(){localStorage.removeItem("token"),e.LogoutUser(),t.push("/login")},color:"primary",autoFocus:!0,children:"logout"})]})]})]})},W=(a(433),a.p+"static/media/nofoodwaste.9f99245e.png"),G=a.p+"static/media/about_us_img.d5e1aa97.jpg",H=a.p+"static/media/helpingHands.e989a302.jpg",V=a.p+"static/media/mission.a6e7a167.jpg",J=(a.p,a(573)),K=a(267),Y=a(220),X=a.n(Y),Z=a(68),Q=a.n(Z),$=a.p+"static/media/meWink.7981e269.png";var ee=function(e){var t=Object(F.g)(),a=Object(n.useState)(""),r=Object(P.a)(a,2),c=r[0],o=r[1],i=Object(n.useState)(""),l=Object(P.a)(i,2),d=l[0],u=l[1],j=Object(n.useState)(""),b=Object(P.a)(j,2),p=b[0],h=b[1],O=s.a.useState(!1),m=Object(P.a)(O,2),f=m[0],x=m[1],g=function(e,t){x(!1)},v=Object(n.useRef)(),y=Object(n.useRef)(),_=Object(n.useRef)(),w=Object(n.useRef)(),k=Object(n.useRef)();return Object(z.jsxs)("div",{children:[Object(z.jsx)("img",{className:"bg_img",src:"https://static.vecteezy.com/system/resources/previews/001/555/346/non_2x/people-donating-sanitary-items-during-quaratine-time-scenery-free-vector.jpg",alt:"bg-img"}),Object(z.jsxs)("div",{className:"home-container",children:[Object(z.jsx)("div",{className:"home-container-logo",children:Object(z.jsx)("img",{src:W,alt:"nofoodwaste"})}),Object(z.jsxs)("div",{"data-aos":"fade-left",className:"home-container-details",children:[Object(z.jsx)("h1",{children:"Feed the Hungry"}),Object(z.jsxs)("h4",{children:["If you can't feed ",Object(z.jsx)("b",{children:"HUNDRED"})," then just feed ",Object(z.jsx)("b",{children:"ONE"})]}),Object(z.jsx)("button",{onClick:function(){localStorage.getItem("token")?t.push("donate"):x(!0)},className:"home-donate-buttton",children:"Donate"})]})]}),Object(z.jsxs)("div",{id:"about_us",className:"about_us_container",children:[Object(z.jsxs)("div",{"data-aos":"fade-right",className:"about_us_left",children:[Object(z.jsx)("h2",{children:"ABOUT US"}),Object(z.jsx)("br",{}),Object(z.jsx)("p",{children:"Waste management is one of the main concerns with our environment which impacts the health of our society. A significant amount of waste disposed by people are organic material. Kitchen wastes like food scraps disposed by families and restaurants, are becoming in large amounts and the natural capacity of the environment cannot assimilate them. "})]}),Object(z.jsx)("div",{"data-aos":"fade-left",className:"about_us_right",children:Object(z.jsx)("img",{src:G,alt:"about_us_img",className:"about_us_img"})})]}),Object(z.jsxs)("div",{className:"helping_hands",children:[Object(z.jsx)("img",{src:H,alt:"bg_img",className:"helping_hands_bg_img"}),Object(z.jsxs)("div",{"data-aos":"zoom-out-down",className:"helping_hands_main",children:[Object(z.jsx)("h2",{className:"centerp",children:"Welcome to server Needy"}),Object(z.jsx)("br",{}),Object(z.jsx)("p",{className:"centerp",children:"This website is a Registered Non-Profitable and Non-Religious Social Service Oraganisation. We work 24/7 to serve poor and needy. Our passion remains in feeding the hungry. We offer help whole theartedly to the needy."})]})]}),Object(z.jsxs)("div",{className:"mission",children:[Object(z.jsx)("div",{"data-aos":"fade-right",className:"mission_left",children:Object(z.jsx)("img",{src:V,alt:"mission_img",className:"mission_img"})}),Object(z.jsxs)("div",{"data-aos":"fade-left",className:"mission_right",children:[Object(z.jsx)("h2",{className:"centerp",children:"OUR MISSION"}),Object(z.jsx)("br",{}),Object(z.jsx)("p",{className:"centerp",children:"Waste management is one of the main concerns with our environment which impacts the health of our society. A significant amount of waste disposed by people are organic material. Kitchen wastes like food scraps disposed by families and restaurants, are becoming in large amounts and the natural capacity of the environment cannot assimilate them. "})]})]}),Object(z.jsx)("div",{className:"contact_us",children:Object(z.jsxs)("div",{className:"contact_us_main",children:[Object(z.jsx)("h2",{children:"Contact us"})," ",Object(z.jsx)("br",{}),Object(z.jsx)("p",{children:"Waste management is one of the main concerns with our environment which impacts the health of our society."}),Object(z.jsx)("br",{}),Object(z.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c.trim().length<2?(v.current.style.border="2px  solid red",o("")):d.trim().length<2?(y.current.style.border="2px  solid red",u("")):p.trim().length<2?(_.current.style.border="2px  solid red",h("")):(k.current.innerHTML="Sending...",Q.a.post("https://food-waste-management.herokuapp.com/api/post/mail",{frommail:"protfoliobala@gmail.com",password:"Protfolio@99",tomail:"kamandlabalashekhar@gmail.com",Subject:"<h1>".concat(c," </h1> send you a message"),Body:"Name : <h2>".concat(c," </h2> <br/> Email : <h2>").concat(d,"</h2> <br/> description : <h2>").concat(p,"</h2>")}).then((function(e){k.current.innerHTML="Submit","success"===e.data.msg?(w.current.style.display="flex",setTimeout((function(){w.current.style.display="none"}),3e3),o(""),u(""),h("")):e.data.msg})))},className:"contact_us_form",children:[Object(z.jsx)("label",{children:"Name :"}),Object(z.jsx)("br",{}),Object(z.jsx)("input",{ref:v,className:"first_name",value:c,onChange:function(e){v.current.style.border="none",o(e.target.value)},type:"text",required:!0}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsx)("label",{children:"Email :"}),Object(z.jsx)("br",{}),Object(z.jsx)("input",{ref:y,className:"full_name",value:d,onChange:function(e){y.current.style.border="none",u(e.target.value)},type:"email",required:!0}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsx)("label",{children:"Description :"}),Object(z.jsx)("br",{}),Object(z.jsx)("textarea",{style:{resize:"vertical",maxHeight:"200px",minHeight:"30px"},ref:_,value:p,onChange:function(e){_.current.style.border="none",h(e.target.value)},type:"text",required:!0,rows:"3"}),Object(z.jsx)("button",{ref:k,type:"submit",className:"contact_submit",children:" Submit"})]})]})}),Object(z.jsx)("div",{style:{textAlign:"center",backgroundColor:"#84e22b",color:"white"},children:Object(z.jsx)("p",{children:"Save Lives, Share Foods"})}),Object(z.jsx)(J.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:f,autoHideDuration:6e3,onClose:g,message:"Please Login to Donate",action:Object(z.jsxs)(s.a.Fragment,{children:[Object(z.jsx)(R.a,{color:"secondary",size:"small",onClick:function(){t.replace("/login")},children:"login"}),Object(z.jsx)(K.a,{size:"small","aria-label":"close",color:"inherit",onClick:g,children:Object(z.jsx)(X.a,{fontSize:"small"})})]})}),Object(z.jsxs)("div",{ref:w,className:"snackbar",id:"move",children:[Object(z.jsx)("img",{src:$,alt:""}),Object(z.jsxs)("div",{children:["Hey! We got your message.",Object(z.jsx)("br",{}),"We will get back to you ASAP."]})]})]})},te=a(26),ae=a.n(te),ne=a(39),se=(a(451),a(546)),re=a(349);function ce(e){var t=Object(F.g)(),a=Object(n.useState)(""),s=Object(P.a)(a,2),r=s[0],c=s[1],o=Object(n.useState)(""),i=Object(P.a)(o,2),l=i[0],d=i[1],u=Object(n.useState)(""),j=Object(P.a)(u,2),b=j[0],p=j[1],h=Object(n.useState)(""),O=Object(P.a)(h,2),m=O[0],f=O[1],x=Object(n.useState)(""),g=Object(P.a)(x,2),v=g[0],y=g[1],_=Object(n.useState)(""),w=Object(P.a)(_,2),k=w[0],N=w[1],S=Object(n.useState)(!1),C=Object(P.a)(S,2),D=C[0],I=C[1],U=function(){var a=Object(ne.a)(ae.a.mark((function a(){var n;return ae.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:I(!0),n={password:b,email:l},e.LoginUser(n,(function(){e.LoadUser((function(){I(!1),console.log("user loaded")})),e.LoadPosts((function(){I(!1),console.log("posts loaded")})),t.replace("/")}));case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),L=function(){var a=Object(ne.a)(ae.a.mark((function a(){var n;return ae.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n={name:k,email:m,password:v},e.signupUser(n,(function(){e.LoadUser((function(){console.log("user loaded")})),e.LoadPosts((function(){console.log("posts loaded")})),t.replace("/")}));case 2:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(z.jsx)("div",{className:"register-wrapper",children:Object(z.jsx)("div",{className:"Register-container",children:Object(z.jsxs)("div",{className:"container ".concat(r),children:[Object(z.jsx)("div",{className:"form-container sign-up-container",children:Object(z.jsxs)("form",{onSubmit:function(e){e.preventDefault(),L()},children:[Object(z.jsx)("h1",{className:"create_account",children:"Create Account"}),Object(z.jsxs)("div",{className:"social-container",children:[Object(z.jsx)("a",{href:"#",className:"social",children:Object(z.jsx)("i",{className:"fab fa-facebook-f"})}),Object(z.jsx)("a",{href:"#",className:"social",children:Object(z.jsx)("i",{className:"fab fa-google-plus-g"})}),Object(z.jsx)("a",{href:"#",className:"social",children:Object(z.jsx)("i",{className:"fab fa-linkedin-in"})})]}),Object(z.jsx)("span",{children:"or use your email for registration"}),Object(z.jsx)("input",{value:k,onChange:function(e){return N(e.target.value)},type:"text",placeholder:"Name"}),Object(z.jsx)("input",{value:m,onChange:function(e){return f(e.target.value)},type:"email",placeholder:"Email"}),Object(z.jsx)("input",{value:v,onChange:function(e){return y(e.target.value)},type:"password",placeholder:"Password"}),Object(z.jsx)("button",{type:"submit",children:"Sign Up"})]})}),Object(z.jsx)("div",{className:"form-container sign-in-container",children:Object(z.jsxs)("form",{onSubmit:function(e){e.preventDefault(),U()},children:[Object(z.jsx)("h1",{children:"Sign in"}),Object(z.jsxs)("div",{className:"social-container",children:[Object(z.jsx)("a",{href:"#",className:"social",children:Object(z.jsx)("i",{className:"fab fa-facebook-f"})}),Object(z.jsx)("a",{href:"#",className:"social",children:Object(z.jsx)("i",{className:"fab fa-google-plus-g"})}),Object(z.jsx)("a",{href:"#",className:"social",children:Object(z.jsx)("i",{className:"fab fa-linkedin-in"})})]}),Object(z.jsx)("span",{children:"or use your account"}),Object(z.jsx)("input",{value:l,onChange:function(e){return d(e.target.value)},type:"email",placeholder:"Email"}),Object(z.jsx)("input",{value:b,onChange:function(e){return p(e.target.value)},type:"password",placeholder:"Password"}),Object(z.jsx)("a",{href:"#",children:"Forgot your password?"}),Object(z.jsx)("button",{type:"submit",children:"Sign In"})]})}),Object(z.jsx)("div",{className:"overlay-container",children:Object(z.jsxs)("div",{className:"overlay",children:[Object(z.jsxs)("div",{className:"overlay-panel overlay-left",children:[Object(z.jsx)("h1",{children:"Welcome Back!"}),Object(z.jsx)("p",{children:"To keep connected with us please login with your personal info"}),Object(z.jsx)("button",{onClick:function(){c("")},className:"ghost",children:"Sign In"})]}),Object(z.jsxs)("div",{className:"overlay-panel overlay-right",children:[Object(z.jsx)("h1",{children:"Hello, Friend!"}),Object(z.jsx)("p",{children:"Enter your personal details and start journey with us"}),Object(z.jsx)("button",{onClick:function(){c("right-panel-active")},className:"ghost",children:"Sign Up"})]})]})}),Object(z.jsx)(se.a,{style:{zIndex:"1600"},open:D,children:Object(z.jsx)(re.a,{color:"primary"})})]})})})}a(452),a(453);var oe=a(388),ie=a(230),le=a(353),de=a(357),ue=a(356),je=a(574),be=a(354),pe=a(355),he=a(169),Oe=a(389),me=a.n(Oe),fe=Object(oe.autoPlay)(me.a);var xe=function(e){var t,a,s,r,c,o,i,l,d,u,j,b,p,h=Object(n.useState)("Pick Me"),O=Object(P.a)(h,2),m=O[0],f=O[1],x=Object(n.useState)(0),g=Object(P.a)(x,2),v=g[0],y=g[1],_=Object(n.useState)(""),w=Object(P.a)(_,2),k=(w[0],w[1],Object(F.g)());return Object(z.jsxs)("div",{"data-aos":"fade-up",className:"post-container",children:[Object(z.jsxs)("div",{className:"post-container-details",children:[Object(z.jsxs)("div",{children:[Object(z.jsxs)("p",{className:"posted_on",children:["posted on - ",Object(ie.a)(null===(t=e.post)||void 0===t?void 0:t.createdAt)]}),Object(z.jsxs)("div",{className:"posted_by_user",children:[Object(z.jsx)("img",{src:null===(a=e.post)||void 0===a||null===(s=a.postedBy)||void 0===s?void 0:s.image}),Object(z.jsx)("h4",{children:null===(r=e.post)||void 0===r||null===(c=r.postedBy)||void 0===c?void 0:c.name})]}),Object(z.jsxs)("div",{className:"post_availability",children:[Object(z.jsx)("b",{children:"Description : "}),e.post.description]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("br",{}),Object(z.jsx)(je.a,{className:"table",component:he.a,children:Object(z.jsxs)(le.a,{"aria-label":"simple table",children:[Object(z.jsx)(be.a,{children:Object(z.jsxs)(pe.a,{children:[Object(z.jsx)(ue.a,{align:"center",children:Object(z.jsx)("b",{children:"Food Item"})}),Object(z.jsxs)(ue.a,{align:"center",children:[Object(z.jsx)("b",{children:"Availability"})," "]}),Object(z.jsx)(ue.a,{align:"center",children:Object(z.jsx)("b",{children:"Spoils_in_hrs"})}),Object(z.jsx)(ue.a,{align:"center",children:Object(z.jsx)("b",{children:"Bio_Gas"})}),Object(z.jsx)(ue.a,{align:"center",children:Object(z.jsx)("b",{children:"Food_Donate"})})]})}),Object(z.jsx)(de.a,{children:e.post.fooditems.map((function(t,a){var n,s;return Date.parse(null===(n=e.post)||void 0===n?void 0:n.updatedAt)/1e3+60*parseInt(t.spoil_in_hrs)*60<(new Date).getTime()/1e3?Object(z.jsxs)(pe.a,{children:[Object(z.jsx)(ue.a,{align:"center",children:t.item_name}),Object(z.jsxs)(ue.a,{align:"center",children:[t.availability,"kgs"]}),Object(z.jsxs)(ue.a,{align:"center",style:{color:"red"},children:["spoiled ",Math.floor(((new Date).getTime()/1e3-(Date.parse(null===(s=e.post)||void 0===s?void 0:s.updatedAt)/1e3+60*parseInt(t.spoil_in_hrs)*60))/3600),"hrs ago"]}),Object(z.jsx)(ue.a,{align:"center",children:t.Bio_Gas}),Object(z.jsx)(ue.a,{align:"center",children:t.Food_Donate})]},a):Object(z.jsxs)(pe.a,{children:[Object(z.jsx)(ue.a,{align:"center",children:t.item_name}),Object(z.jsxs)(ue.a,{align:"center",children:[t.availability,"kgs"]}),Object(z.jsx)(ue.a,{align:"center",children:Object(z.jsxs)("span",{style:{color:"green"},children:[t.spoil_in_hrs,"hrs"]})}),Object(z.jsx)(ue.a,{align:"center",children:t.item_name}),Object(z.jsx)(ue.a,{align:"center",children:t.Food_Donate})]},t.name)}))})]})}),Object(z.jsx)("br",{})]}),Object(z.jsxs)("div",{className:"post_loc",children:[Object(z.jsx)("b",{children:"Address : "}),e.post.address]}),Object(z.jsxs)("div",{className:"post_remined",children:[Object(z.jsx)("b",{children:"Other Details :"}),e.post.any_other]})]}),Object(z.jsx)("div",{className:"post_button",children:e.myPosts?Object(z.jsxs)("div",{className:"upost_button",children:[Object(z.jsx)("button",{onClick:function(){return k.push("/donate",e.post)},className:"eureq_now_btn",children:"Edit"}),Object(z.jsx)("button",{onClick:function(){var t;return e.DeletePost(null===e||void 0===e||null===(t=e.post)||void 0===t?void 0:t._id)},className:"dureq_now_btn",children:"Delete"})]}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("button",{className:"req_now_btn d",onClick:function(){var t,a;e.upVote(null===e||void 0===e||null===(t=e.post)||void 0===t?void 0:t._id,null===(a=e.currentUser)||void 0===a?void 0:a._id)},children:(null===(o=e.post)||void 0===o||null===(i=o.points)||void 0===i?void 0:i.includes(null===(l=e.currentUser)||void 0===l?void 0:l._id))?"Reward added":"Add Reward"}),Object(z.jsx)("button",{className:"map_req_now_btn",onClick:function(){var t,a,n;k.push("map",{fromPost:!0,id:null===(t=e.post)||void 0===t?void 0:t._id,lat:parseInt(null===(a=e.post)||void 0===a?void 0:a.lat),lon:parseInt(null===(n=e.post)||void 0===n?void 0:n.lon)})},children:"show on map"}),Object(z.jsx)("button",{className:"di_req_now_btn",children:Object(z.jsx)("a",{target:"_blank",href:"https://www.google.com/maps/search/?api=1&query=".concat(null===(d=e.post)||void 0===d?void 0:d.address),children:"show directions"})}),Object(z.jsx)("button",{type:"submit",className:"di_req_now_btn",onClick:function(){f("Picked")},children:m})]})})]}),Object(z.jsx)("div",{className:"post-container-img",children:1===(null===(u=e.post)||void 0===u||null===(j=u.images)||void 0===j?void 0:j.length)?Object(z.jsx)("img",{className:"post-container-img-img",src:null===(b=e.post)||void 0===b?void 0:b.images[0],alt:""}):Object(z.jsx)(fe,{className:"ImageGallery",axis:"x",index:v,onChangeIndex:function(e){y(e)},enableMouseEvents:!0,children:null===e||void 0===e||null===(p=e.post)||void 0===p?void 0:p.images.map((function(t,a){var n;return Object(z.jsx)("div",{style:{overflow:"hidden",width:"100%",height:"100%"},children:Math.abs(v-a)<=(null===e||void 0===e||null===(n=e.post)||void 0===n?void 0:n.images.length)?Object(z.jsx)("img",{style:{overflow:"hidden",width:"100%",height:"100%",objectFit:"cover"},src:t,alt:""}):null},a)}))})})]})},ge=a(547),ve=a(280),ye=a(390),_e=a.n(ye),we=a(549),ke=a(358),Ne=a(550),Se=a(222),Ce=a.n(Se);var De=function(e){var t,a,n,r,c=Object(F.g)(),o=s.a.useRef(),i=s.a.useState(!1),l=Object(P.a)(i,2),d=l[0],u=l[1],b=s.a.useState(!1),p=Object(P.a)(b,2),h=p[0],O=p[1],m=s.a.useState(""),f=Object(P.a)(m,2),x=f[0],g=f[1],v=s.a.useState("Food"),y=Object(P.a)(v,2),_=y[0],w=y[1],k=s.a.useState({latitude:0,longitude:0}),N=Object(P.a)(k,2),S=N[0],C=N[1],D=function(e){var t;o.current&&(null===(t=o.current)||void 0===t?void 0:t.contains(null===e||void 0===e?void 0:e.target))||u(!1)};function I(e){"Tab"===e.key&&(e.preventDefault(),u(!1))}var U=s.a.useRef(d);s.a.useEffect((function(){!0===U.current&&!1===d&&o.current.focus(),U.current=d}),[d]),s.a.useEffect(Object(ne.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation.getCurrentPosition((function(e){C({latitude:e.coords.latitude,longitude:e.coords.longitude})}),(function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),[]);var L=function(e,t){w(t),D(e)};return Object(z.jsxs)("div",{children:[0===(null===(t=e.posts)||void 0===t||null===(a=t.posts)||void 0===a?void 0:a.length)?Object(z.jsx)("div",{style:{marginTop:"20px",textAlign:"center"},children:"No Posts found"}):Object(z.jsxs)("div",{className:"dashboard",children:[Object(z.jsxs)("div",{className:"dashboard_search_location",children:[Object(z.jsxs)("div",{className:"dashboard_search",children:[Object(z.jsx)("input",{value:x,onChange:function(e){return g(e.target.value)},placeholder:"search for ".concat(_),type:"search",required:!0}),Object(z.jsx)("img",{ref:o,onClick:function(){u((function(e){return!e}))},className:"filterIcon",src:"https://cdn.icon-icons.com/icons2/2368/PNG/512/filter_icon_143777.png",alt:"filter"})]}),Object(z.jsx)("div",{className:"dashboard_location",children:Object(z.jsx)("button",{onClick:function(){return O(!h)},children:h?Object(z.jsxs)(z.Fragment,{children:["Sort by time",Object(z.jsx)(_e.a,{style:{marginLeft:"5px"}})]}):Object(z.jsxs)(z.Fragment,{children:["Location",Object(z.jsx)(Ce.a,{style:{marginLeft:"5px"}})]})})})]}),Object(z.jsx)("div",{className:"dashboard_posts",children:null===(n=e.posts)||void 0===n||null===(r=n.posts)||void 0===r?void 0:r.sort((function(e,t){if(h){var a=parseInt(e.lat),n=parseInt(e.lon),s=parseInt(t.lat),r=parseInt(t.lon),c=S.latitude,o=S.longitude;return Math.sqrt((a-c)*(a-c)+(n-o)*(n-o))-Math.sqrt((s-c)*(s-c)+(r-o)*(r-o))}return Date.parse(e.updatedAt)<Date.parse(t.updatedAt)})).filter((function(e,t){if("Food"===_){var a=[];return e.fooditems.map((function(e){return a.push(e.item_name)})),e.fooditems.map((function(e){return a.push(e.Bio_Gas)})),e.fooditems.map((function(e){return a.push(e.Food_Donate)})),a.toString().includes(x)}return e.postedBy.name.includes(x)})).map((function(t,a){var n;return Object(z.jsx)(xe,{currentUser:null===(n=e.currentUser)||void 0===n?void 0:n.user,upVote:function(t,a){return e.upVote(t,a)},post:t},a)}))})]}),Object(z.jsx)("div",{"data-aos":"zoom-in-down","data-aos-delay":"5000",className:"float_donate",onClick:function(){c.push("donate")},children:Object(z.jsx)("button",{children:"Donate"})}),Object(z.jsx)(we.a,{open:d,anchorEl:o.current,role:void 0,transition:!0,disablePortal:!0,children:function(e){var t=e.TransitionProps,a=e.placement;return Object(z.jsx)(ve.a,Object(j.a)(Object(j.a)({},t),{},{style:{transformOrigin:"bottom"===a?"center top":"center bottom"},children:Object(z.jsx)(he.a,{children:Object(z.jsx)(ge.a,{onClickAway:D,children:Object(z.jsxs)(Ne.a,{autoFocusItem:d,id:"menu-list-grow",onKeyDown:I,children:[Object(z.jsx)(ke.a,{onClick:function(e){return L(e,"Food")},children:"Food Items"}),Object(z.jsx)(ke.a,{onClick:function(e){return L(e,"User")},children:"User"}),Object(z.jsx)(ke.a,{onClick:function(e){return L(e,"Food")},children:"Bio Gas"}),Object(z.jsx)(ke.a,{onClick:function(e){return L(e,"Food")},children:"Food Donate"})]})})})}))}})]})},Ie=a(359),Pe=(a(483),a.p,a(223)),Ue=a.n(Pe),Fe=a(575),Le=s.a.forwardRef((function(e,t){return Object(z.jsx)(Fe.a,Object(j.a)({direction:"up",ref:t},e))}));var Re=function(e){var t,a,r,c,o,i,l,d,u,j=s.a.useState(!1),b=Object(P.a)(j,2),p=b[0],h=b[1],O=Object(n.useState)(null),m=Object(P.a)(O,2),f=m[0],x=m[1],g=Object(n.useState)(null),v=Object(P.a)(g,2),y=v[0],_=v[1],w=Object(n.useState)(!1),k=Object(P.a)(w,2),N=k[0],S=k[1],C=Object(n.useState)(""),D=Object(P.a)(C,2),I=D[0],U=D[1],F=Object(n.useState)(!1),L=Object(P.a)(F,2),q=L[0],M=L[1],W=Object(n.useState)(""),G=Object(P.a)(W,2),H=G[0],V=G[1],K=Object(n.useState)(!1),Y=Object(P.a)(K,2),X=Y[0],Z=Y[1],Q=function(){h(!1)};return Object(z.jsxs)("div",{className:"account_main",children:[Object(z.jsxs)("div",{className:"account_wrapper",children:[Object(z.jsxs)("div",{className:"accout_wrapper_left",children:[Object(z.jsx)("h2",{children:"PROFILE"}),Object(z.jsx)("img",{className:"account_profile_img",src:null===(t=e.user)||void 0===t?void 0:t.image,alt:"profile img"})]}),Object(z.jsxs)("div",{className:"accout_wrapper_right",children:[Object(z.jsxs)("h3",{children:[null===(a=e.user)||void 0===a?void 0:a.email,Object(z.jsx)(Ue.a,{onClick:function(){return function(){var t,a;h(!0),x(null===(t=e.user)||void 0===t?void 0:t.image),V(null===(a=e.user)||void 0===a?void 0:a.name)}()},className:"edit-icon"})]}),Object(z.jsxs)("p",{children:[null===e||void 0===e||null===(r=e.user)||void 0===r?void 0:r.name," earned(",Object(z.jsx)("abbr",{className:"upvotes",title:"Up Votes",children:null===(c=e.posts)||void 0===c||null===(o=c.posts)||void 0===o?void 0:o.filter((function(t){return t.postedBy._id===e.user._id})).reduce((function(e,t){return e+t.points.length}),0)}),")rewards"]})]})]}),Object(z.jsxs)(he.a,{className:"account_paper",elevation:3,children:[Object(z.jsx)("h3",{className:"my-posts",children:0===(null===(i=e.posts)||void 0===i||null===(l=i.posts)||void 0===l?void 0:l.filter((function(t){return t.postedBy._id===e.user._id})).length)?"no posts":"My posts"}),Object(z.jsx)("div",{className:"account_posts",children:null===(d=e.posts)||void 0===d||null===(u=d.posts)||void 0===u?void 0:u.filter((function(t){return t.postedBy._id===e.user._id})).map((function(t,a){var n;return Object(z.jsx)(xe,{myPosts:!0,DeletePost:e.DeletePost,currentUser:e.user,post:t,username:e.user.name,image:null===(n=e.user)||void 0===n?void 0:n.image},a)}))}),Object(z.jsx)(A.a,{style:{maxWidth:"500px",margin:"auto"},open:p,TransitionComponent:Le,keepMounted:!0,onClose:Q,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:Object(z.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(){if(X){if(H.length<2)return void _("enter Name");S(!0),U("Posting...");var t=new FormData;t.append("file",f),t.append("upload_preset","SocialMedia"),t.append("cloud_name","djqrcbjmu"),fetch("\thttps://api.cloudinary.com/v1_1/djqrcbjmu/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(t){var a={};a.name=H,a.image=t.secure_url,e.updateProfile(a,(function(){S(!0),U("Posted yayu"),x(null),V(""),_(null),h(!1),S(!1)}))}))}else if(q){if(H.length<2)return void _("enter Name");S(!0),U("Posting...");var a={};a.name=H,a.image=f,e.updateProfile(a,(function(){S(!0),U("Posted yayu"),x(null),V(""),h(!1),_(null),S(!1)}))}else h(!1)}()},children:[Object(z.jsx)(B.a,{id:"alert-dialog-slide-title",children:"Edit Profile"}),Object(z.jsx)(E.a,{style:{padding:"0px"},children:Object(z.jsxs)("div",{id:"alert-dialog-slide-description",children:[Object(z.jsxs)("p",{style:{opacity:"0.7",padding:"0px 10px"},children:[Object(z.jsx)("b",{children:"NOTE: "}),"High resolution image takes much to upload, please be patient"]}),Object(z.jsx)("br",{}),Object(z.jsx)("input",{style:{width:"100%",margin:"auto",paddingLeft:"10px"},type:"file",onChange:function(e){x(e.target.files[0]),M(!0),Z(!0)}}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsx)("img",{width:"100%",height:"200px",style:{textAlign:"center",padding:"10px",objectFit:"contain",cursor:"pointer"},alt:"img",src:function(e){try{return URL.createObjectURL(e)}catch(t){return e}}(f)}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsx)(Ie.a,{style:{padding:"0px 10px"},size:"small",required:!0,error:null!==y,helperText:y,label:"Name",fullWidth:!0,variant:"outlined",value:H,onChange:function(e){V(e.target.value),M(!0)}})]})}),Object(z.jsxs)(T.a,{children:[Object(z.jsx)(R.a,{type:"button",onClick:Q,color:"primary",children:"cancel"}),Object(z.jsx)(R.a,{type:"submit",onClick:Q,color:"primary",children:"Update"})]})]})})]}),Object(z.jsx)(J.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:N,autoHideDuration:3e3,onClose:function(){return S(!1)},message:I})]})};var Ae=function(e){var t=localStorage.getItem("token");return e.login?t?Object(z.jsx)(F.a,{to:"/"}):e.children:null===e.data.user?Object(z.jsx)("div",{children:"Loading.."}):t?e.children:Object(z.jsx)(F.a,{to:"/login"})},Te=a(210),Ee=a(59),qe=a(60),Be=a(409),ze=a(408),Me=a(393),We=a.n(Me),Ge=a(402),He=a.n(Ge),Ve=a(394),Je=a.n(Ve),Ke=a(400),Ye=a.n(Ke),Xe=a(278),Ze=a.n(Xe),Qe=a(277),$e=a.n(Qe),et=a(395),tt=a.n(et),at=a(397),nt=a.n(at),st=a(398),rt=a.n(st),ct=a(399),ot=a.n(ct),it=a(403),lt=a.n(it),dt=a(396),ut=a.n(dt),jt=a(401),bt=a.n(jt),pt=a(404),ht=a.n(pt),Ot=(a(484),a(485),a(265)),mt=a(92),ft=a(405),xt=a.n(ft),gt=a(271),vt=a.n(gt),yt={Add:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(We.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(Je.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return Object(z.jsx)($e.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(tt.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(Ze.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(Ue.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(ut.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(nt.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(rt.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(ot.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(Ze.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(Ye.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return Object(z.jsx)($e.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(bt.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(He.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(lt.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(ht.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))}))},_t=function(e){Object(Be.a)(a,e);var t=Object(ze.a)(a);function a(e){var n,s,r,c,o,i,l,d,u,j,b;return Object(Ee.a)(this,a),(b=t.call(this,e)).handleClose=function(e,t){b.setState({open:!1})},b.handleInputChange=function(e){b.setState(Object(Te.a)({},e.target.name,{error:"",value:e.target.value}))},b.uploadImageURL=function(e){try{return URL.createObjectURL(e)}catch(t){return e}},b.removeImage=function(e){var t=b.state.images,a=t[e];t.splice(e,1);try{a.startsWith("https")&&b.setState(b.deleteImage([a],0,(function(){b.setState({images:t})})))}catch(n){b.setState({images:t})}b.setState({images:t})},b.eraserData=function(){b.setState({loading:!1});var e=b.state.images.length;for(b.setState({images:[],Description:{error:"",value:""},address:{error:"",value:""},any_other:{error:"",value:""},data:[]});e--;)b.removeImage()},b.checkValidation=function(e,t){return 0===e.value.trim().length?(b.setState({snakbarmessage:t,open:!0}),1):0},b.savePostData=Object(ne.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(b.state.images.length<1)){e.next=3;break}return b.setState({snakbarmessage:"select atleast one image",open:!0}),e.abrupt("return");case 3:if(!b.checkValidation(b.state.Description,"write some description")){e.next=5;break}return e.abrupt("return");case 5:if(!b.checkValidation(b.state.address,"please choose address")){e.next=7;break}return e.abrupt("return");case 7:if(0!==b.state.data.length){e.next=10;break}return b.setState({snakbarmessage:"Add atleast one item",open:!0}),e.abrupt("return");case 10:b.setState({loading:!0}),(t={}).postedBy=b.props.id,t.lat="22",t.lon="33",t.address=b.state.address.value,t.description=b.state.Description.value,t.any_other=b.state.any_other.value,t.fooditems=b.state.data,t.Bio_Gas=b.state.data,t.Food_Donate=b.state.data,b.props.location.state?b.props.UpdatePost(b.props.location.state._id,b.props.location.state.images,b.state.images,t,b.eraserData):b.props.CreatePosts(b.state.images,t,b.eraserData);case 22:case"end":return e.stop()}}),e)}))),b.state={snakbarmessage:"",open:!1,snakbar:!1,loading:!1,Description:{error:"",value:e.location.state?null===(n=e.location)||void 0===n||null===(s=n.state)||void 0===s?void 0:s.description:""},address:{error:"",value:e.location.state?null===(r=e.location)||void 0===r||null===(c=r.state)||void 0===c?void 0:c.address:""},any_other:{error:"",value:e.location.state?null===(o=e.location)||void 0===o||null===(i=o.state)||void 0===i?void 0:i.any_other:""},images:e.location.state?Object(N.a)(null===(l=e.location)||void 0===l||null===(d=l.state)||void 0===d?void 0:d.images):[],columns:[{title:"item_name",field:"item_name"},{title:"availability",field:"availability",type:"numeric"},{title:"spoil_in_hrs",field:"spoil_in_hrs",type:"numeric"},{title:"Bio Gas",field:"Bio_Gas",type:"boolean"},{title:"Food Donate",field:"Food_Donate",type:"boolean"}],data:e.location.state?Object(N.a)(null===(u=e.location)||void 0===u||null===(j=u.state)||void 0===j?void 0:j.fooditems):[]},b}return Object(qe.a)(a,[{key:"render",value:function(){var e=this;return Object(z.jsxs)(Ot.a,{className:"Donate",bgcolor:"white",boxShadow:1,p:4,style:{maxWidth:"700px"},children:[Object(z.jsx)(mt.a,{variant:"h5",gutterBottom:!0,children:"Add product"}),Object(z.jsx)(Ot.a,{display:"flex",flexWrap:"wrap",children:this.state.images.map((function(t,a){return Object(z.jsxs)(Ot.a,{margin:"12px",children:[Object(z.jsx)("img",{src:e.uploadImageURL(t),style:{height:"160px",width:"160px",objectFit:"cover"}}),Object(z.jsx)("br",{}),Object(z.jsx)(K.a,{"aria-label":"delete",onClick:function(t){return e.removeImage(a)},children:Object(z.jsx)(xt.a,{})})]},a)}))}),Object(z.jsx)("input",{accept:"image/*",hidden:!0,id:"contained-button-file",onChange:function(t){if(t.target.files&&t.target.files[0]){var a=e.state.images;a.push(t.target.files[0]),e.setState({images:a}),t.target.value=null}},type:"file"}),Object(z.jsx)("br",{}),Object(z.jsx)("label",{htmlFor:"contained-button-file",className:"donate-btn",children:Object(z.jsx)("span",{children:"Add Image"})}),Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsx)("textarea",{style:{width:"100%"},className:"donate-input",name:"Description",type:"text",error:this.state.Description.error,placeholder:"Description",onChange:function(t){return e.handleInputChange(t)},value:this.state.Description.value}),Object(z.jsx)("div",{className:"place-wrapper",children:Object(z.jsx)("textarea",{className:"donate-input",name:"address",type:"text",error:this.state.address.error,placeholder:"address",onChange:function(t){return e.handleInputChange(t)},value:this.state.address.value})}),Object(z.jsx)("textarea",{className:"donate-input",style:{width:"100%"},name:"any_other",type:"text",error:this.state.any_other.error,placeholder:"any_other",onChange:function(t){return e.handleInputChange(t)},value:this.state.any_other.value}),Object(z.jsx)("br",{}),Object(z.jsx)(vt.a,{icons:yt,options:{search:!1,paging:!1},title:"Add Food Items here",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){e.setState({data:[].concat(Object(N.a)(e.state.data),[t])}),a()}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,s){setTimeout((function(){var s=Object(N.a)(e.state.data);s[a.tableData.id]=t,e.setState({data:Object(N.a)(s)}),n()}),1e3)}))},onRowDelete:function(t){return new Promise((function(a,n){setTimeout((function(){var n=Object(N.a)(e.state.data),s=t.tableData.id;n.splice(s,1),e.setState({data:Object(N.a)(n)}),a()}),1e3)}))}}}),Object(z.jsx)("br",{}),Object(z.jsx)("label",{className:"donate-btn1",onClick:function(){return e.savePostData()},children:Object(z.jsx)("span",{children:"Upload"})}),Object(z.jsx)(se.a,{style:{zIndex:"1600"},open:this.state.loading,children:Object(z.jsx)(re.a,{color:"primary"})}),Object(z.jsx)(J.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:6e3,onClose:this.handleClose,message:this.state.snakbarmessage,action:Object(z.jsx)(s.a.Fragment,{children:Object(z.jsx)(K.a,{size:"small","aria-label":"close",color:"inherit",onClick:this.handleClose,children:Object(z.jsx)(X.a,{fontSize:"small"})})})})]})}}]),a}(s.a.Component),wt=Object(F.i)(_t),kt=a(175),Nt=a(407),St=a.n(Nt);a(542);function Ct(e){var t,a,s,r=Object(n.useRef)(),c=Object(F.h)(),o=Object(n.useState)({width:"100%",height:"100vh",latitude:17.41342,longitude:17.41342,zoom:8}),i=Object(P.a)(o,2),l=i[0],d=i[1],u=Object(n.useState)([]),b=Object(P.a)(u,2),p=b[0],h=b[1],O=Object(n.useState)(""),m=Object(P.a)(O,2),f=m[0],x=m[1],g=Object(n.useState)(null),v=Object(P.a)(g,2),y=v[0],_=v[1],w=Object(n.useState)({latitude:0,longitude:0}),k=Object(P.a)(w,2),N=k[0],S=k[1];Object(n.useEffect)(Object(ne.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation.getCurrentPosition((function(e){S({latitude:e.coords.latitude,longitude:e.coords.longitude})}),(function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),[]),Object(n.useEffect)(Object(ne.a)(ae.a.mark((function t(){var a,n,s,r;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=[],null===(a=e.data)||void 0===a||null===(n=a.posts)||void 0===n||n.map((function(e){var t={};t.lat=e.lat,t.lon=e.lon,t.id=e._id,t.address=e.address,t.description=e.description,t.foods=[],e.fooditems.map((function(e){t.foods.push(e.item_name)})),t.foods=t.foods.toString(),r.push(t)})),h(r),!0!==(null===(s=c.state)||void 0===s?void 0:s.fromPost)){t.next=8;break}d(Object(j.a)(Object(j.a)({},l),{},{latitude:c.state.lat,longitude:c.state.lon})),_(c.state.id),t.next=10;break;case 8:return t.next=10,navigator.geolocation.getCurrentPosition((function(e){d(Object(j.a)(Object(j.a)({},l),{},{latitude:e.coords.latitude,longitude:e.coords.longitude}))}),(function(e){return console.log(e)}));case 10:case"end":return t.stop()}}),t)}))),[null===(t=e.data)||void 0===t?void 0:t.posts]);var C=function(e,t,a){_(e),d(Object(j.a)(Object(j.a)({},l),{},{latitude:parseInt(t),longitude:parseInt(a)}))};return Object(z.jsxs)("div",{className:"map",children:[Object(z.jsxs)("div",{className:"map-food-items",children:[0===p.filter((function(e){return e.foods.includes(f)})).length&&Object(z.jsx)("div",{style:{textAlign:"center"},children:"No Food items found"}),p.filter((function(e){return e.foods.includes(f)})).map((function(e,t){return Object(z.jsxs)(he.a,{"data-aos":"fade-right",className:"map-food-item",elevation:4,children:[Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Address"})," : ",e.address]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Foods"})," : ",e.foods]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Description"})," : ",e.description]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("button",{className:"map-dir-btn",children:Object(z.jsx)("a",{target:"_blank",href:"https://www.google.com/maps/search/?api=1&query=".concat(e.address),children:"direction"})}),Object(z.jsx)("button",{className:"map-loc-btn",onClick:function(){return C(e.id,e.lat,e.lon)},children:"location"})]})]},t)}))]}),Object(z.jsx)("div",{className:"reactMapGl",children:Object(z.jsxs)(kt.c,Object(j.a)(Object(j.a)({},l),{},{mapStyle:"mapbox://styles/mapbox/streets-v11",mapboxApiAccessToken:"pk.eyJ1Ijoia2FtYW5kbGFiYWxhc2hla2hhciIsImEiOiJja3JiZXJ0MWg0YjdpMndueHlzOHFmMmJhIn0.GK_kdlg4xXcqcdSF8gmDow",onViewportChange:function(e){return d(e)},transitionDuration:"400",children:[Object(z.jsxs)(kt.a,{latitude:parseInt(N.latitude),longitude:parseInt(N.longitude),offsetLeft:-12,offsetTop:-5,children:[Object(z.jsx)(Ce.a,{style:{cursor:"pointer",font:10*l.zoom,color:"green"}}),"your are here"]}),null===(a=e.data)||void 0===a||null===(s=a.posts)||void 0===s?void 0:s.map((function(t,a){var n;return Object(z.jsxs)("div",{children:[Object(z.jsx)(kt.a,{latitude:parseInt(t.lat),longitude:parseInt(t.lon),offsetLeft:-12,offsetTop:-5,children:Object(z.jsx)(St.a,{onClick:function(){return C(t._id,t.lat,t.lon)},style:{cursor:"pointer",font:10*l.zoom,color:e.id===(null===(n=t.postedBy)||void 0===n?void 0:n._id)?"blue":"red"}})}),t._id===y&&Object(z.jsx)(kt.b,{latitude:parseInt(t.lat),longitude:parseInt(t.lon),closeButton:!0,onClose:function(){return _(null)},anchor:"bottom",children:Object(z.jsxs)("div",{style:{zIndex:"200"},children:[Object(z.jsx)("span",{className:"maptimeago",children:Object(ie.a)(t.createdAt)}),Object(z.jsxs)("div",{className:"mapuser",children:[Object(z.jsx)("img",{src:t.postedBy.image}),Object(z.jsx)("p",{children:t.postedBy.name})]}),Object(z.jsxs)("div",{style:{fontSize:"12px",marginTop:"5px"},children:[Object(z.jsx)("span",{style:{color:"#FF00FF"},children:"description :"}),"  ",t.description]}),Object(z.jsxs)("div",{style:{fontSize:"12px",marginTop:"5px"},children:[Object(z.jsx)("span",{style:{color:"#FF00FF"},children:"Address :"})," : ",t.address]}),Object(z.jsx)(je.a,{style:{maxWidth:"350px"},children:Object(z.jsxs)(le.a,{"aria-label":"simple table",children:[Object(z.jsx)(be.a,{children:Object(z.jsxs)(pe.a,{children:[Object(z.jsx)(ue.a,{size:"small",align:"center",children:Object(z.jsx)("b",{children:"Items"})}),Object(z.jsxs)(ue.a,{align:"center",children:[Object(z.jsx)("b",{children:"quantity"})," "]}),Object(z.jsx)(ue.a,{align:"center",children:Object(z.jsx)("b",{children:"time"})})]})}),Object(z.jsx)(de.a,{children:t.fooditems.map((function(e,a){return Date.parse(null===t||void 0===t?void 0:t.updatedAt)/1e3+60*parseInt(e.spoil_in_hrs)*60<(new Date).getTime()/1e3?Object(z.jsxs)(pe.a,{children:[Object(z.jsx)(ue.a,{align:"center",children:e.item_name}),Object(z.jsxs)(ue.a,{align:"center",children:[e.availability,"kgs"]}),Object(z.jsxs)(ue.a,{align:"center",style:{color:"red"},children:["spoiled ",Math.floor(((new Date).getTime()/1e3-(Date.parse(null===t||void 0===t?void 0:t.updatedAt)/1e3+60*parseInt(e.spoil_in_hrs)*60))/3600),"hrs ago"]}),Object(z.jsx)(ue.a,{align:"center",children:e.Bio_Gas}),Object(z.jsx)(ue.a,{align:"center",children:e.Food_Donate})]},a):Object(z.jsxs)(pe.a,{children:[Object(z.jsx)(ue.a,{align:"center",children:e.item_name}),Object(z.jsxs)(ue.a,{align:"center",children:[e.availability,"kgs"]}),Object(z.jsx)(ue.a,{align:"center",children:Object(z.jsxs)("span",{style:{color:"green"},children:[e.spoil_in_hrs,"hrs"]})}),Object(z.jsx)(ue.a,{align:"center",children:e.Bio_Gas}),Object(z.jsx)(ue.a,{align:"center",children:e.Food_Donate})]},a)}))})]})}),Object(z.jsx)("div",{})]})})]},a)})),Object(z.jsx)("input",{placeholder:"search food items here...",ref:r,onChange:function(){x(r.current.value)},className:"map_search",type:"search",required:!0})]}))})]})}var Dt=Object(l.b)((function(e){return{user:e.user,posts:e.posts}}),(function(e){return{updateProfile:function(t,a){return e(function(e,t){return function(){var a=Object(ne.a)(ae.a.mark((function a(n,s){var r,c;return ae.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=localStorage.getItem("token"),a.next=4,Q.a.put("https://food-waste-management.herokuapp.com/api/auth/update_user",e,{headers:{authentication:r}});case 4:c=a.sent,t(),n({type:_,payload:c.data}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0.response.data);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}()}(t,a))},LoadUser:function(t){return e(function(e){return function(){var t=Object(ne.a)(ae.a.mark((function t(a,n){var s,r;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=localStorage.getItem("token")){t.next=5;break}return a({type:v,payload:"token not found"}),t.abrupt("return");case 5:return t.next=7,Q.a.get("https://food-waste-management.herokuapp.com/api/auth/getuser",{headers:{authentication:s}});case 7:r=t.sent,a({type:b,payload:r.data}),e(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),a({type:v,payload:t.t0.response});case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,a){return t.apply(this,arguments)}}()}(t))},LoadPosts:function(t){return e(function(e){return function(){var t=Object(ne.a)(ae.a.mark((function t(a,n){var s;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Q.a.get("https://food-waste-management.herokuapp.com/api/post/allposts");case 3:s=t.sent,a({type:g,payload:s.data}),e(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:v,payload:t.t0.response});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}()}(t))},DeletePost:function(t){return e(function(e){return function(){var t=Object(ne.a)(ae.a.mark((function t(a,n){var s;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Q.a.delete("https://food-waste-management.herokuapp.com/api/post/".concat(e),{headers:{authentication:localStorage.getItem("token")}});case 3:s=t.sent,a({type:m,payload:s.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()}(t))},LoginUser:function(t,a){return e(function(e,t){return function(){var a=Object(ne.a)(ae.a.mark((function a(n,s){var r;return ae.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Q.a.post("https://food-waste-management.herokuapp.com/api/auth/login",e);case 3:r=a.sent,n({type:p,payload:r.data}),localStorage.setItem("token",r.data.token),t(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),n({type:v,payload:a.t0.response});case 13:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}()}(t,a))},signupUser:function(t,a){return e(function(e,t){return function(){var a=Object(ne.a)(ae.a.mark((function a(n,s){var r;return ae.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Q.a.post("https://food-waste-management.herokuapp.com/api/auth/register",e);case 3:r=a.sent,n({type:h,payload:r.data}),localStorage.setItem("token",r.data.token),t(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0),n({type:v,payload:a.t0.response});case 13:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}()}(t,a))},LogoutUser:function(){return e((function(e,t){localStorage.removeItem("token"),e({type:x})}))},upVote:function(t,a){return e(function(e,t){return function(){var a=Object(ne.a)(ae.a.mark((function a(n,s){return ae.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Q.a.post("https://food-waste-management.herokuapp.com/api/post/upvote",{id:e},{headers:{authentication:localStorage.getItem("token")}});case 3:a.sent,n({type:y,payload:{postId:e,currentUserId:t}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0.message);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}()}(t,a))},UpdatePost:function(t,a,n,s,r){return e(function(e,t,a,n,s){return function(){var t=Object(ne.a)(ae.a.mark((function t(r,c){var o;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{o=[],a.map(function(){var t=Object(ne.a)(ae.a.mark((function t(c){var i,l,d,u,j;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(typeof c!==String){t.next=4;break}o.push(c),t.next=18;break;case 4:return(i=new FormData).append("file",c),i.append("upload_preset","SocialMedia"),i.append("cloud_name","djqrcbjmu"),t.next=10,fetch("\thttps://api.cloudinary.com/v1_1/djqrcbjmu/image/upload",{method:"post",body:i});case 10:return l=t.sent,t.next=13,l.json();case 13:return d=t.sent,t.next=16,d.secure_url;case 16:u=t.sent,o.push(u);case 18:if(o.length!==a.length){t.next=25;break}return n.images=o,t.next=22,Q.a.put("https://food-waste-management.herokuapp.com/api/post/".concat(e),n,{headers:{authentication:localStorage.getItem("token")}});case 22:j=t.sent,r({type:f,payload:j.data}),s();case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(c){console.log(c.message),s()}case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(t,0,n,s,r))},CreatePosts:function(t,a,n){return e(function(e,t,a){return function(){var n=Object(ne.a)(ae.a.mark((function n(s,r){var c;return ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{c=[],e.map(function(){var n=Object(ne.a)(ae.a.mark((function n(r){var o,i,l,d,u,j,b,p,h,m;return ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(o=new FormData).append("file",r),o.append("upload_preset","SocialMedia"),o.append("cloud_name","djqrcbjmu"),n.next=6,fetch("\thttps://api.cloudinary.com/v1_1/djqrcbjmu/image/upload",{method:"post",body:o});case 6:return i=n.sent,n.next=9,i.json();case 9:return l=n.sent,n.next=12,l.secure_url;case 12:if(d=n.sent,c.push(d),c.length!==e.length){n.next=30;break}return t.images=c,u=t.address,n.next=19,Q.a.get("https://www.mapquestapi.com/geocoding/v1/address?key=iIzTGMTjj6hWGGvsPSShyeDxyifWFnpL&location=".concat(u));case 19:return j=n.sent,b=j.data.results[0].locations[0].latLng,p=b.lat.toString(),h=b.lng.toString(),t.lat=p,t.lon=h,n.next=27,Q.a.post("https://food-waste-management.herokuapp.com/api/post/addpost",t,{headers:{authentication:localStorage.getItem("token")}});case 27:m=n.sent,s({type:O,payload:m.data}),a();case 30:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}catch(r){console.log(r.message),a()}case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(t,a,n))}}}))((function(e){var t,a,s,r,c,o=Object(n.useState)(!1),i=Object(P.a)(o,2),l=i[0],d=i[1];return Object(n.useEffect)((function(){d(!0),e.LoadUser((function(){d(!1)})),e.LoadPosts((function(){d(!1)}))}),[]),Object(z.jsx)("div",{children:Object(z.jsxs)(L.a,{children:[Object(z.jsxs)(F.d,{children:[Object(z.jsxs)(F.b,{path:"/",exact:!0,children:[Object(z.jsx)(M,{LogoutUser:function(){return e.LogoutUser()}}),Object(z.jsx)(ee,{})]}),Object(z.jsx)(F.b,{path:"/login",exact:!0,children:Object(z.jsx)(Ae,{data:e.user,login:!0,children:Object(z.jsx)(ce,{LoginUser:function(t,a){return e.LoginUser(t,a)},signupUser:function(t,a){return e.signupUser(t,a)},LoadUser:e.LoadUser,LoadPosts:e.LoadPosts})})}),Object(z.jsxs)(F.b,{path:"/dashboard",exact:!0,children:[Object(z.jsx)(M,{LogoutUser:function(){return e.LogoutUser()}}),Object(z.jsx)(De,{currentUser:e.user,upVote:function(t,a){return e.upVote(t,a)},posts:e.posts,user:e.user})]}),Object(z.jsx)(F.b,{path:"/account",exact:!0,children:Object(z.jsxs)(Ae,{data:e.user,children:[Object(z.jsx)(M,{LogoutUser:function(){return e.LogoutUser()}}),Object(z.jsx)(Re,{updateProfile:e.updateProfile,DeletePost:e.DeletePost,posts:e.posts,user:null===(t=e.user)||void 0===t?void 0:t.user})]})}),Object(z.jsx)(F.b,{path:"/donate",exact:!0,children:Object(z.jsxs)(Ae,{data:e.user,children:[Object(z.jsx)(M,{LogoutUser:function(){return e.LogoutUser()}}),Object(z.jsx)(wt,{UpdatePost:e.UpdatePost,CreatePosts:e.CreatePosts,id:null===(a=e.user)||void 0===a||null===(s=a.user)||void 0===s?void 0:s._id})]})}),Object(z.jsx)(F.b,{path:"/map",exact:!0,children:Object(z.jsx)(Ae,{data:e.user,children:Object(z.jsx)(Ct,{data:e.posts,id:null===(r=e.user)||void 0===r||null===(c=r.user)||void 0===c?void 0:c._id})})})]}),Object(z.jsx)(se.a,{style:{zIndex:"1600"},open:l,children:Object(z.jsx)(re.a,{color:"primary"})})]})})}));var It=function(){return Object(n.useEffect)((function(){i.a.init({easing:"ease-in-out-back",duration:1e3,offset:0})}),[]),Object(z.jsx)(l.a,{store:I,children:Object(z.jsx)(Dt,{})})},Pt=function(e){e&&e instanceof Function&&a.e(6).then(a.bind(null,954)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(z.jsx)(s.a.StrictMode,{children:Object(z.jsx)(It,{})}),document.getElementById("root")),Pt()}},[[543,1,2]]]);
//# sourceMappingURL=main.09e76d79.chunk.js.map